<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>

<form id="ListUsers">
		Søg på et BrugerID:<br>
		<input id="number" type="number" name="UserID"><br>
		<input type="submit" value="Søg">
</form>
<div>
	<ul id="UserList"></ul>
</div>

<script>
$(document).ready(function() {
	$('#ListUsers').submit(function(event) {
		event.preventDefault();
		
		var id = $("#number").val();
		search(id);
		
		return false;
	});
});

function search(searchKey) {
	if (searchKey) {
		$.ajax({
			type: 'GET',
			url: 'rest/UserService/users/' + searchKey,
			dataType: 'json',
			converters: {
				'text json': true
			},
			success: function(response) {
				$("#UserList").html(renderList(response));
			}
		});			
	} else {
		$.ajax({
			type: 'GET',
			url: 'rest/UserService/userlist',
			dataType: 'json',
			converters: {
				'text json': true
			},
			success: function(response) {
				$("#UserList").html(renderList(response));
			}
		});
	}
}

function renderList(data) {
    var list = JSON.parse(data);
    console.log(list);
    if(list instanceof Array) {
        $.each(list, function(index, user) {
            $('#UserList').append("ID: "+user.id+
                ", Brugernavn: "+user.brugerNavn+
                ", Initialer: "+ user.ini+
                ", Cpr-nummer: "+user.cpr+
                ", Rolle: "+user.rolle+
                ", Status: "+user.status+"<br>");
        })
    }
    else{
        $('#UserList').append("ID: "+list.id+
            ", Brugernavn: "+list.brugerNavn+
            ", Initialer: "+ list.ini+
            ", Cpr-nummer: "+list.cpr+
            ", Rolle: "+list.rolle+
            ", Status: "+list.status+"<br>");
    }
}
</script>

</body>
</html>